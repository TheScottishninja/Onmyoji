<div class="section tabs-wrapper">
    <input type="radio" name="attr_tab" value="basics" class="tab-button basics-tab" checked />
    <div class="tab basics-tab"a>Basics</div>

    <input type="radio" name="attr_tab" value="spells" class="tab-button spells-tab" />
    <div class="tab spells-tab"a>Spells</div>

    <input type="radio" name="attr_tab" value="traits" class="tab-button traits-tab" />
    <div class="tab traits-tab">Loadout</div>

    <input type="radio" name="attr_tab" value="combat" class="tab-button combat-tab" />
    <div class="tab combat-tab">Combat</div>

    <input type="radio" name="attr_tab" value="social" class="tab-button social-tab" />
    <div class="tab social-tab">Health</div>

    <input type="radio" name="attr_tab" value="inventory" class="tab-button inventory-tab" />
    <div class="tab inventory-tab">Inventory</div>

    <input type="radio" name="attr_tab" value="lifepath" class="tab-button lifepath-tab" />
    <div class="tab lifepath-tab">Lifepath</div>

    <div class="tabs-hr"></div>

    <div class="stats-section">
        <div class="agility-box stats-box">
            <!--<label class="stat-label">Strength</label>-->
            <button name="roll_agility" type="roll" value="&{template:default} {{name=Agility}} {{Result=[[d20+(@{Agility})]]}}">
                <span>Agility</span>
            </button>
            <input type="number" name="attr_Agility" class="stat-input" step="1" />
        </div>
        <div class="concentration-box stats-box">
            <!--<label class="stat-label">Dexterity</label>-->
            <button name="roll_concentration" type="roll" value="&{template:default} {{name=Concentration}} {{Result=[[d20+(@{Concentration})]]}}">
                <span>Concentration</span>
            </button>
            <input type="number" name="attr_Concentration" class="stat-input" step="1" />
        </div>
        <div class="endurance-box stats-box">
            <!--<label class="stat-label">Speed</label>-->
            <button name="roll_endurance" type="roll" value="&{template:default} {{name=Endurance}} {{Result=[[d20+(@{Endurance})]]}}">
                <span>Endurance</span>
            </button>
            <input type="number" name="attr_Endurance" class="stat-input" step="1" />
        </div>
        <div class="memory-box stats-box">
            <!--<label class="stat-label">Endurance</label>-->
            <button name="roll_memory" type="roll" value="&{template:default} {{name=Memory}} {{Result=[[d20+(@{Memory})]]}}">
                <span>Memory</span>
            </button>
            <input type="number" name="attr_Memory" class="stat-input" step="1" />
        </div>
        <div class="sensing-box stats-box">
            <!--<label class="stat-label">Intelligence</label>-->
            <button name="roll_sensing" type="roll" value="&{template:default} {{name=Sensing}} {{Result=[[d20+(@{Sensing})]]}}">
                <span>Sensing</span>
            </button>
            <input type="number" name="attr_Sensing" class="stat-input" step="1" />
        </div>
		<div class="spirit-bar">
		  <input name="attr_spirit_orb" class="rangespirit" type="range" min="0" max="100" value="100">
          <div class="spirit-label">Spirit</div>
		  <div class="spirit-numbers">
			  <input type="number" class="spirit-numbers-label" name="attr_spirit" value="100"/>
			  <span class="spirit-numbers-span">/</span>
			  <input type="number" class="spirit-numbers-label" name="attr_spirit_max" value="100"/>
		  </div>
          <input name="attr_spirit_orb" type="hidden" value="100">
        </div>
    </div>

    <div class="basics-section">
        <div class="name-line">
            <label class="basics-label">Name</label>
            <input type="text" name="attr_character_name" class="line-input name-input" />
        </div>
        <div class="people-line">
            <input class="arrow-toggle" type="checkbox" />
            <span class="arrow-label">&#9658;</span>
            <label class="basics-label people-label">People</label>
            <input type="text" name="attr_People" class="line-input people-input" />
            <div class="spell-notes">
                <textarea class="people-notes-input" name="attr_People_Notes" placeholder="Notes"></textarea>
            </div>
        </div>

        <hr class="basics-divider" />

        <div class="creed-line">
            <label class="basics-label">Creed</label>
            <input type="text" name="attr_Creed" class="line-input creed-input" />
        </div>
        <div class="idiosyncrasy-line">
            <label class="basics-label">Idiosyncrasy</label>
            <input type="text" name="attr_Idiosyncrasy" class="line-input idiosyncrasy-input" />
        </div>

        <hr class="basics-divider" />

        <div class="luck-box">
            <div class="current-luck-box stats-box">
                <label class="stat-label">Level</label>
                <input type="number" name="attr_Level" class="stat-input" step="1" value="5" />
            </div>

            <hr class="basics-divider" />

            <h3 class="traits-header">Ambitions</h3>
            <input type="text" class="ambition-input line-input" name="attr_Ambition1" placeholder="Long-Term Ambition" />
            <input type="text" class="ambition-input line-input" name="attr_Ambition2" placeholder="Short-Term Ambition" />
            <input type="text" class="ambition-input line-input" name="attr_Ambition3" placeholder="Short-Term Ambition" />
            <input type="text" class="ambition-input line-input" name="attr_Ambition4" placeholder="Party Ambition" />
        </div>
        <div class="experiences-box">
            <h3 class="traits-header">Experiences</h3>
            <fieldset class="repeating_experiences">
                <div class="experience-line">
                    <input type="text" class="line-input experience-input" name="attr_Experience" placeholder="Experience" />
                    <input type="checkbox" class="line-input influence-spent" name="attr_Exhausted" />
                </div>
            </fieldset>
        </div>

        <hr class="basics-divider" />

        <h3 class="traits-header">Notes</h3>
        <textarea class="traits-input" name="attr_Notes"></textarea>
    </div>

    <div class="spells-section">
        <div class="spell-hs-column">
            <h3 class="spell-header">Hand Seal Spells</h3>
            <fieldset class="repeating_spellsHS">
                <input class="arrow-toggle" type="checkbox" />
                <span class="arrow-label">&#9658;</span>
                
                <input type="text" class="spell-magnitude" name="attr_Magnitude" value="Mag"/>
                    <!--<div class="spell-line">-->
                <span class="spell-top-row">   
                    <input type="text" class="spell-input line-input" name="attr_SpellName" value="Name"/>
                    <input type="hidden" name="attr_RollSpell" value="Nothing here">
                    <button class="spell-roll" name="roll_Spell" type="roll" value="@{RollSpell}"/>
                <!--</div>-->
                </span>
                <div class="spell-bottom-row">
                    <input type="text" class="line-input spell-cost" name="attr_Cost" value=&#9864;&#9865; />
                    <select class="spell-rank" name="attr_SpellType">
                        <option value="Fire">&ominus;&nbsp;&nbsp;&nbsp;&nbsp;Fire</option>
                        <option value="Water" selected>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Water</option>
                        <option value="Earth">&oplus;&nbsp;&nbsp;&nbsp;&nbsp;Earth</option>
                        <option value="Metal">&oplus;&oplus;&nbsp;Metal</option>
                    </select>
                    
                </div>
                
                <div class="spell-notes">
                    <textarea class="spell-hs-notes-input" name="attr_Info" placeholder="Notes"></textarea>
                </div>
            </fieldset>
        </div>

        <div class="spell-t-column">
            <h3 class="spell-header">Talisman Spells</h3>
            <fieldset class="repeating_spellsT">
                <input class="arrow-toggle" type="checkbox" />
                <span class="arrow-label">&#9658;</span>
                
                <input type="text" class="spell-magnitude" name="attr_Magnitude" value="Mag"/>
                    <!--<div class="spell-line">-->
                <span class="spell-top-row">   
                    <input type="text" class="spell-input line-input" name="attr_SpellName" value="Name"/>
                    <input type="hidden" name="attr_RollSpell" value="Nothing here">
                    <button class="spell-roll" name="roll_Spell" type="roll" value="@{RollSpell}"/>
                <!--</div>-->
                </span>
                <div class="spell-bottom-row">
                    <input type="text" class="line-input spell-cost" name="attr_Cost" value=&#9864;&#9865; />
                    <select class="spell-rank" name="attr_SpellType">
                        <option value="Fire">&ominus;&nbsp;&nbsp;&nbsp;&nbsp;Fire</option>
                        <option value="Water" selected>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Water</option>
                        <option value="Earth">Earth</option>
                        <option value="Metal">&oplus;&oplus;&nbsp;Metal</option>
                    </select>
                    
                </div>
                <div class="spell-notes">
                    <textarea class="spell-t-notes-input" name="attr_Info" placeholder="Notes"></textarea>
                    <span class="spell-scaling-label">Scaling</span>
                    <textarea class="spell-t-scaling-input" name="attr_Scaling" placeholder="Scaling"></textarea>
                </div>
            </fieldset>
        </div>

    </div>

    <div class="traits-section">
		<span class="current-talismans" >Current &nbsp;&nbsp;&nbsp;&nbsp; Max</span>
		<div class="fire-talismans">
			<img class="symbol-small" src="https://github.com/TheScottishninja/Onmyoji/raw/main/candlebright2.png" >
			<input type="number" name="attr_fire_current" class="talisman-capacity" value="20" />
			<span>/</span>
			<input type="number" name="attr_fire_capacity" class="talisman-capacity" value="20" />
		</div>
		<div class="water-talismans">
			<img class="symbol-small" src="https://github.com/TheScottishninja/Onmyoji/raw/main/water-drop.png" >
			<input type="number" name="attr_water_current" class="talisman-capacity" value="20" />
			<span>/</span>
			<input type="number" name="attr_water_capacity" class="talisman-capacity" value="20" />
		</div>
		<div class="metal-talismans">
			<img class="symbol-small" src="https://github.com/TheScottishninja/Onmyoji/raw/main/anvil.png" >
			<input type="number" name="attr_metal_current" class="talisman-capacity" value="20" />
			<span>/</span>
			<input type="number" name="attr_metal_capacity" class="talisman-capacity" value="20" />
		</div>
		<div class="wood-talismans">
			<img class="symbol-small" src="https://github.com/TheScottishninja/Onmyoji/raw/main/beech.png" >
			<input type="number" name="attr_wood_current" class="talisman-capacity" value="20" />
			<span>/</span>
			<input type="number" name="attr_wood_capacity" class="talisman-capacity" value="20" />
		</div>
		<div class="earth-talismans">
			<img class="symbol-small" src="https://github.com/TheScottishninja/Onmyoji/raw/main/peaks.png" >
			<input type="number" name="attr_earth_current" class="talisman-capacity" value="20" />
			<span>/</span>
			<input type="number" name="attr_earth_capacity" class="talisman-capacity" value="20" />
		</div>
		<div class="talisman-total">
			<input type="hidden" name="attr_talisman_total" value="100"/>
			<input type="hidden" name="attr_talisman_capacity" value="100"/>
			<span>Total: </span>
			<input type="number" name="attr_talisman_display_total" class="talisman-capacity total-capacity" value="@{talisman_total}" disabled="true" />
			<span>/</span>
			<input type="number" name="attr_talisman_display_capacity" class="talisman-capacity total-capacity" value="@{talisman_capacity}" disabled="true" />
		</div>
		<input type="hidden" name="attr_talisman_over" class="talisman-over" value="1" />
		<div class="talisman-over">
			<span>The total talisman carried exceeds the capacity!</span>
		</div>
    </div>

    <div class="combat-section">
        <h3 class="traits-header">Combat Scores</h3>
        <div class="combat-scores-box">
            <div class="attack-box stats-box">
                <label class="stat-label">Attack</label>
                <input type="number" name="attr_Attack" class="stat-input" step="1" value="floor((@{Dexterity}+@{Intelligence})/2)+@{Attack_Mod}" disabled />
            </div>
            <div class="dodges-box stats-box">
                <label class="stat-label">Dodges</label>
                <input type="hidden" name="attr_Dodges" class="stat-input" value="1" />
                <input type="number" name="attr_Dodges_max" class="stat-input" step="1" value="1" disabled />
            </div>
            <div class="willpower-box stats-box">
                <label class="stat-label">Willpower</label>
                <input type="number" name="attr_Willpower" class="stat-input" step="1" value="floor((@{Charisma}+@{Determination})/2)+@{Willpower_Mod}+@{Defense_Card}" disabled />
            </div>
            <div class="armor-box stats-box">
                <label class="stat-label">Armor</label>
                <input type="text" name="attr_Armor" class="stat-input" pattern = "[0-9]+([/][0-9]+)?" />
            </div>
            <div class="health-current-box stats-box">
                <label class="stat-label">HP</label>
                <input type="number" name="attr_HP" class="stat-input" step="1" />
            </div>
            <div class="health-max-box stats-box">
                <label class="stat-label">Max HP</label>
                <input type="number" name="attr_HP|max" class="stat-input" step="1" value="@{Strength}+@{Endurance}+@{HP_Mod}" disabled />
            </div>
            <div class="move-box stats-box">
                <label class="stat-label">Move</label>
                <input type="number" name="attr_Move" class="stat-input" step="1" value="floor((@{Speed}+@{Endurance})/2)+@{Move_Mod}" disabled />
            </div>
            <div class="defense-card-box stats-box">
                <label class="stat-label">Defense Card</label>
                <input type="number" name="attr_Defense_Card" class="stat-input" step="1" value="0" />
            </div>
        </div>

        <div class="combat-modifiers-box">
            <input class="arrow-toggle" type="checkbox" />
            <span class="arrow-label">&#9658;</span>
            <div class="combat-mod-header">Combat Score Modifiers</div>
            <div class="spell-notes">
                <div class="attack-box stats-box">
                    <label class="stat-label">Modifier</label>
                    <input type="number" name="attr_Attack_Mod" class="stat-input" step="1" value="0" />
                </div>
                <div class="defense-box stats-box">
                    <label class="stat-label">Modifier</label>
                    <input type="number" name="attr_Defense_Mod" class="stat-input" step="1" value="0" />
                </div>
                <div class="willpower-box stats-box">
                    <label class="stat-label">Modifier</label>
                    <input type="number" name="attr_Willpower_Mod" class="stat-input" step="1" value="0" />
                </div>
                <div class="armor-box stats-box invisible-box"></div>
                <div class="health-current-box stats-box invisible-box"></div>
                <div class="health-max-box stats-box">
                    <label class="stat-label">Modifier</label>
                    <input type="number" name="attr_HP_Mod" class="stat-input" step="1" value="0" />
                </div>
                <div class="move-box stats-box">
                    <label class="stat-label">Modifier</label>
                    <input type="number" name="attr_Move_Mod" class="stat-input" step="1" value="0" />
                </div>
                <div class="defense-card-box stats-box invisible-box"></div>
            </div>
        </div>

        <h3 class="traits-header">Attacks</h3>
        <label class="attack-label attack-input">Attack</label>
        <label class="attack-label attack-properties">Properties</label>
        <label class="attack-label attack-array">1-2</label>
        <label class="attack-label attack-array">3-4</label>
        <label class="attack-label attack-array">5-6</label>
        <label class="attack-label attack-array">7-8</label>
        <label class="attack-label attack-array">9-10</label>
        <label class="attack-label attack-damage">Damage</label>
        <fieldset class="repeating_attacks">
            <input class="arrow-toggle" type="checkbox" />
            <span class="arrow-label">&#9658;</span>
            <div class="attack-line">
                <input type="text" class="attack-input line-input" name="attr_Name" placeholder="Attack" />
                <input type="text" class="attack-properties line-input" name="attr_Properties" placeholder="Properties" />
                <input type="number" class="attack-array line-input" name="attr_Damage12" value="0" />
                <input type="number" class="attack-array line-input" name="attr_Damage34" value="0" />
                <input type="number" class="attack-array line-input" name="attr_Damage56" value="0" />
                <input type="number" class="attack-array line-input" name="attr_Damage78" value="0" />
                <input type="number" class="attack-array line-input" name="attr_Damage910" value="0" />
                <select class="attack-damage" name="attr_Damage">
                    <option value="none" selected></option>
                    <option value="burning">Burning</option>
                    <option value="corrosive">Corrosive</option>
                    <option value="cutting">Cutting</option>
                    <option value="freezing">Fatigue</option>
                    <option value="freezing">Freezing</option>
                    <option value="piercing">Piercing</option>
                    <option value="smashing">Smashing</option>
                    <option value="toxic">Toxic</option>
                </select>
            </div>
            <div class="skill-notes">
                <textarea class="item-notes-input" name="attr_Notes" placeholder="Notes"></textarea>
            </div>
        </fieldset>

        <h3 class="traits-header">Consequences and Notes</h3>
        <textarea class="traits-input" name="attr_Consequences"></textarea>
    </div>

    <div class="social-section">
        <div class="social-box">
            <h3 class="traits-header">Health</h3>
            <div class="health-torso">
                <div class="health-label">Torso</div>
              <input name="attr_health_torso" class="rangehealth" type="range" min="0" max="100" value="100">
              <div class="health-numbers">
                  <input type="number" class="health-numbers-label" name="attr_health_torso" value="20"/>
                  <span class="health-numbers-span">/</span>
                  <input type="number" class="health-numbers-label" name="attr_health_torso_max" value="20"/>
              </div>
              <input name="attr_health_torso_percent" type="hidden" value="100">
            </div>
            <div class="health-left-arm">
                <div class="health-label">Left Arm</div>
              <input name="attr_health_left_arm" class="rangehealth" type="range" min="0" max="100" value="100">
              <div class="health-numbers">
                  <input type="number" class="health-numbers-label" name="attr_health_left_arm" value="20"/>
                  <span class="health-numbers-span">/</span>
                  <input type="number" class="health-numbers-label" name="attr_health_left_arm_max" value="20"/>
              </div>
              <input name="attr_health_left_arm_percent" type="hidden" value="100">
            </div>
            <div class="health-right-arm">
                <div class="health-label">Right Arm</div>
              <input name="attr_health_right_arm" class="rangehealth" type="range" min="0" max="100" value="100">
              <div class="health-numbers">
                  <input type="number" class="health-numbers-label" name="attr_health_right_arm" value="20"/>
                  <span class="health-numbers-span">/</span>
                  <input type="number" class="health-numbers-label" name="attr_health_right_arm_max" value="20"/>
              </div>
              <input name="attr_health_right_arm_percent" type="hidden" value="100">
            </div>
            <img class="health-body" src="https://github.com/TheScottishninja/Onmyoji/raw/main/body_solid.png">
        </div>
        <div class="social-box">
            <h3 class="traits-header">Injuries</h3>

        </div>
    </div>

    <div class="inventory-section">
        <h3 class="traits-header">Quick Inventory</h3>
        <textarea class="inventory-quick" name="attr_Inventory"></textarea>
        <h3 class="traits-header">Equipment</h3>
        <fieldset class="repeating_items">
            <input class="arrow-toggle" type="checkbox" />
            <span class="arrow-label">&#9658;</span>
            <div class="item-line">
                <input type="text" class="item-name line-input" name="attr_Item" placeholder="Item" />
                <input type="text" class="item-properties line-input" name="attr_Properties" placeholder="Properties" />
                <input type="text" class="item-number line-input" name="attr_Numbers" placeholder="#" />
                <input type="text" class="item-page line-input" name="attr_Reference" placeholder="Page" />
            </div>
            <div class="spell-notes">
                <textarea class="item-notes-input" name="attr_Notes" placeholder="Notes"></textarea>
            </div>
        </fieldset>

        <div class="social-box">
            <h3 class="traits-header">Wealth</h3>
            <div class="inventory-wealth-box">
                <div class="gp-box wealth-box">
                    <label class="wealth-label">Gold</label>
                    <input type="number" name="attr_GP" class="wealth-input" step="1" value="0" />
                </div>
                <div class="sp-box wealth-box">
                    <label class="wealth-label">Silver</label>
                    <input type="number" name="attr_SP" class="wealth-input" step="1" value="0" />
                </div>
                <div class="bp-box wealth-box">
                    <label class="wealth-label">Bronze</label>
                    <input type="number" name="attr_BP" class="wealth-input" step="1" value="0" />
                </div>
                 <div class="bits-box wealth-box">
                    <label class="wealth-label">Bits</label>
                    <input type="number" name="attr_Bits" class="wealth-input" step="1" value="0" />
                </div>
            </div>
        </div>

        <div class="social-box">
            <h3 class="traits-header">Encumbrance</h3>
            <div class="inventory-wealth-box">
                <div class="wealth-box">
                    <label class="wealth-label">Current</label>
                    <input type="number" name="attr_Encumbrance" class="wealth-input" step="1" value="0" />
                </div>
                <div class="wealth-box">
                    <label class="wealth-label">Max</label>
                    <input type="number" name="attr_Encumbrance|max" class="wealth-input" value="floor((@{Strength}+@{Dexterity})/2)+@{Encumbrance_Mod}" disabled />
                </div>
                <div class="wealth-box">
                    <label class="wealth-label">Mod</label>
                    <input type="number" name="attr_Encumbrance_Mod" class="wealth-input" step="1" value="0" />
                </div>
            </div>
        </div>
    </div>

    <div class="lifepath-section">
        <div class="social-box">
            <h3 class="traits-header">Training Boxes</h3>
            <div class="training-boxes">
                <input type="checkbox" name="attr_Training_Box1" />
                <input type="checkbox" name="attr_Training_Box2" />
                <input type="checkbox" name="attr_Training_Box3" />
                <input type="checkbox" name="attr_Training_Box4" />
                <input type="checkbox" name="attr_Training_Box5" />
                &nbsp;
                <input type="checkbox" name="attr_Training_Box6" />
                <input type="checkbox" name="attr_Training_Box7" />
                <input type="checkbox" name="attr_Training_Box8" />
                <input type="checkbox" name="attr_Training_Box9" />
                <input type="checkbox" name="attr_Training_Box10" />
            </div>
            <h3 class="traits-header">Birth Fortune</h3>
            <textarea class="lifepath-textarea" name="attr_Birth_Fortune" placeholder="Birth Fortune"></textarea>
            <h3 class="traits-header">Origin</h3>
            <input type="text" name="attr_Origin" class="line-input lifepath-input" placeholder="Origin" />
            <input type="text" name="attr_People" class="line-input lifepath-input" placeholder="People" />
            <input type="text" name="attr_Religion" class="line-input lifepath-input" placeholder="Family Religion" />
            <textarea class="lifepath-textarea" name="attr_Foundational_Event"placeholder="Foundational Event"></textarea>
            <h3 class="traits-header">Coming of Age</h3>
            <input type="text" name="attr_character_name" class="line-input lifepath-input" placeholder="Name" />
            <h4 class="traits-header">Assign Stats: [ 7, 6, 6, 5, 5, 4, 4, 3 ]</h4>
            <input type="text" name="attr_Ambition1" class="line-input lifepath-input" placeholder="Adolescent Ambition" />

            <h3 class="traits-header">Finishing Touches</h3>
            <textarea class="lifepath-textarea" name="attr_Gather_Party" placeholder="Gathering the Party"></textarea>
            <h4 class="traits-header">Hearth & Coin</h4>
            <input type="number" name="attr_Age" class="line-input lifepath-age" step="1" placeholder="Age" />
            <select name="attr_Strata" class="strata-input">
                <option value="common">Common</option>
                <option value="gentle">Gentle</option>
                <option value="noble">Noble</option>
            </select>
            <input type="number" class="standing-input line-input" name="attr_Standing" placeholder="Standing" />
            <div class="lifepath-wealth-box">
                <div class="gp-box wealth-box">
                    <label class="wealth-label">Gold</label>
                    <input type="number" name="attr_GP" class="wealth-input" step="1" value="0" />
                </div>
                <div class="sp-box wealth-box">
                    <label class="wealth-label">Silver</label>
                    <input type="number" name="attr_SP" class="wealth-input" step="1" value="0" />
                </div>
                <div class="bp-box wealth-box">
                    <label class="wealth-label">Bronze</label>
                    <input type="number" name="attr_BP" class="wealth-input" step="1" value="0" />
                </div>
                 <div class="bits-box wealth-box">
                    <label class="wealth-label">Bits</label>
                    <input type="number" name="attr_Bits" class="wealth-input" step="1" value="0" />
                </div>
            </div>
            <h4 class="traits-header">Personal Traits</h4>
            <input type="text" name="attr_Creed" class="line-input lifepath-input" placeholder="Creed" />
            <input type="text" name="attr_Idiosyncrasy" class="line-input lifepath-input" placeholder="Idiosyncrasy" />
            <textarea class="lifepath-textarea" name="attr_Weaknesses" placeholder="Weaknesses"></textarea>
            <h4 class="traits-header">Ambitions</h4>
            <input type="text" name="attr_Ambition1" class="line-input lifepath-input" placeholder="Long-Term Ambition" />
            <input type="text" name="attr_Ambition2" class="line-input lifepath-input" placeholder="Short-Term Ambition" />
            <input type="text" name="attr_Ambition3" class="line-input lifepath-input" placeholder="Short-Term Ambition" />
            <input type="text" name="attr_Ambition4" class="line-input lifepath-input" placeholder="Party Ambition" />
        </div>
        <div class="social-box">
            <h3 class="traits-header">Careers</h3>
            <fieldset class="repeating_careers">
                <div class="attempt">
                    <input type="number" name="attr_Age" class="line-input career-age" step="1" placeholder="Age" />
                    <input type="text" name="attr_Career" class="line-input lifepath-career" placeholder="Career" />
                    <input type="text" name="attr_Training" class="line-input lifepath-input" placeholder="Training" />
                    <textarea class="lifepath-textarea" name="attr_Event" placeholder="Event"></textarea>
                    <input type="text" name="attr_Advancement" class="line-input lifepath-input" placeholder="Advancement" />
                    <input type="text" name="attr_Title" class="line-input lifepath-title" placeholder="Title" />
                    <select name="attr_Strata" class="strata-input career-strata">
                        <option value="common">Common</option>
                        <option value="gentle">Gentle</option>
                        <option value="noble">Noble</option>
                    </select>
                    <input type="number" class="standing-input line-input" name="attr_Standing" placeholder="Standing" />
                </div>
            </fieldset>
        </div>
    </div>
</div>

<script type="text/worker">
// on("change:fire_number", function() {
//   getAttrs(["fire_number"], function(values) {
//     log(values)
//     setAttrs({ fire_range: parseInt(values.fire_number) });
//   });
// });

// ... etc
on("sheet:opened change:fire_capacity change:water_capacity change:earth_capacity change:metal_capacity change:wood_capacity", function() {
	getAttrs(["fire_capacity", "water_capacity", "earth_capacity", "metal_capacity", "wood_capacity", "talisman_capacity"], function(values) {
		var total = parseInt(values.fire_capacity) + parseInt(values.water_capacity) + parseInt(values.earth_capacity) + parseInt(values.metal_capacity) + parseInt(values.wood_capacity);
		setAttrs({"talisman_total": total});
		
		var capacity = parseInt(values.talisman_capacity);
		if (total > capacity) {
			setAttrs({talisman_over: "1"});
		}
		else {
			setAttrs({talisman_over: "0"});
		}
	});
});

on("sheet:opened change:spirit change:spirit_max", function(){
	getAttrs(["spirit", "spirit_max"], function(values){
		var percent = (parseFloat(values.spirit) / parseFloat(values.spirit_max)) * 100;
		setAttrs({"spirit_orb": percent});
	});
});
</script>